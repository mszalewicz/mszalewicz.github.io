<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Maciej Szalewicz</title><link>/</link><description>Maciej Szalewicz</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Sun, 29 Jun 2025 00:00:00 +0000</lastBuildDate><atom:link href="/index.xml" rel="self" type="application/rss+xml"/><item><title>Sqlite Pitfalls 2</title><link>/blog/sqlite_pitfalls_2/</link><pubDate>Sun, 29 Jun 2025 00:00:00 +0000</pubDate><guid>/blog/sqlite_pitfalls_2/</guid><description>&lt;p>Exploration into the critical subsystems of SQLite that are frequently overlooked during initial implementation. We will examine the nuances of referential integrity enforcement, the mechanics of Write-Ahead Logging (WAL) for concurrent access, and the strategies for managing disk footprint through vacuuming.&lt;/p>
&lt;p>This is continuation of &lt;a href="https://mszalewicz.github.io/blog/sqlite_pitfalls_1/">discussion about SQLite pitfalls.&lt;/a>&lt;/p>
&lt;h2 id="enabling-foreign-key-constraints" >
&lt;div>
&lt;a href="#enabling-foreign-key-constraints">
#
&lt;/a>
Enabling Foreign Key Constraints
&lt;/div>
&lt;/h2>
&lt;p>Foreign key constraints are disabled by default in SQLite. This design choice is primarily historical, aimed at preventing backward compatibility issues with older database files and allowing flexibility when importing data that may be temporarily inconsistent. To enforce referential integrity, the application must turn this feature on explicitly using &lt;strong>PRAGMA foreign_keys = ON&lt;/strong>. Crucially, this setting is not stored in the database file metadata; it is a connection-specific flag. Therefore, every new database connection established by your application must issue this pragma immediately upon connecting if enforcement is desired.&lt;/p>
&lt;p>Once enabled, SQLite enforces the constraints immediately, rejecting any INSERT, UPDATE, or DELETE operations that would violate the defined relationships. However, enabling the pragma does not retroactively validate existing data in the database. If the database already contains orphaned records or mismatched keys, the pragma will not report errors until you attempt to modify those specific rows. To validate the integrity of an existing dataset, one must manually run the &lt;strong>PRAGMA foreign_key_check&lt;/strong> command, which scans the specified tables and returns any rows that currently violate foreign key definitions.&lt;/p>
&lt;h2 id="handling-sqlite_busy-and-sql_locked-errors" >
&lt;div>
&lt;a href="#handling-sqlite_busy-and-sql_locked-errors">
#
&lt;/a>
Handling SQLITE_BUSY and SQL_LOCKED Errors
&lt;/div>
&lt;/h2>
&lt;p>The distinction between &lt;strong>SQLITE_BUSY&lt;/strong> and &lt;strong>SQLITE_LOCKED&lt;/strong> is critical for debugging, as they refer to locking conflicts in different scopes. SQLITE_BUSY occurs when a database connection attempts to acquire a lock on the database file, but the file is already locked by a different database connection (potentially in a separate process). This is common in high-concurrency scenarios without Write-Ahead Logging (WAL). To mitigate this, developers should use &lt;strong>PRAGMA busy_timeout = milliseconds&lt;/strong> to instruct the SQLite library to sleep and retry the operation for a defined period before giving up, rather than implementing their own retry loops in the application layer.&lt;/p>
&lt;p>Conversely, SQLITE_LOCKED indicates a conflict within the same database connection. This typically happens when a developer attempts to write to a table while a SELECT statement on that same table is still active (i.e., sqlite3_step() has been called, but sqlite3_finalize() or sqlite3_reset() has not). Because the read cursor holds a shared lock, the write operation on the same connection cannot proceed. Unlike SQLITE_BUSY, there is no timeout handler for this error; the solution requires strictly managing statement lifecycles to ensure read operations are finalized before write operations begin on the same handle.&lt;/p>
&lt;h2 id="managing-large-scale-deletions" >
&lt;div>
&lt;a href="#managing-large-scale-deletions">
#
&lt;/a>
Managing Large-Scale Deletions
&lt;/div>
&lt;/h2>
&lt;p>When rows are deleted from an SQLite database, the file system size of the database file does not immediately decrease. Instead, SQLite marks the pages where the data resided as &amp;ldquo;free pages&amp;rdquo; and adds them to a freelist stored within the database header. This is a performance optimization: it is faster to overwrite these free pages during subsequent INSERT operations than to constantly resize the file on disk. Consequently, a database that undergoes heavy deletion will appear significantly larger on disk than the raw data it contains.&lt;/p>
&lt;p>To physically reclaim this space and return it to the operating system, the &lt;strong>VACUUM&lt;/strong> command must be executed. This command works by copying the entire database content into a temporary file—repacking it with no free pages—and then moving it back over the original file. Alternatively, if the database is configured with &lt;strong>PRAGMA auto_vacuum = INCREMENTAL&lt;/strong>, the application can remove a specific number of pages from the freelist. This approach allows for gradual space reclamation without the blocking I/O overhead of a full database rebuild.&lt;/p>
&lt;h2 id="nul-characters-in-text" >
&lt;div>
&lt;a href="#nul-characters-in-text">
#
&lt;/a>
NUL Characters in Text
&lt;/div>
&lt;/h2>
&lt;p>SQLite is technically &amp;ldquo;binary safe&amp;rdquo; regarding the NUL character (0x00) in text fields, meaning it does not treat NUL as a rigid string terminator in storage. A TEXT column can validly contain a string like &amp;lsquo;Hello\0World&amp;rsquo;, and SQLite will store the full byte sequence, effectively differentiating it from a BLOB only by the encoding associated with the column. This capability allows for the storage of distinct data types that other SQL engines might reject or truncate.&lt;/p>
&lt;p>However, the complexity arises when interfacing with the C-API. If you use standard C-string functions or sqlite3_bind_text passing a negative length (indicating &amp;ldquo;calculate length until NUL&amp;rdquo;), SQLite will truncate the input at the first NUL character. To successfully store and retrieve text containing NULs, the application must explicitly provide the byte length of the string to sqlite3_bind_text (or bind_text64) and rely on sqlite3_column_bytes rather than just sqlite3_column_text when reading data, ensuring the application reads past the NUL character in the return buffer.&lt;/p>
&lt;h2 id="using-wal-write-ahead-logging" >
&lt;div>
&lt;a href="#using-wal-write-ahead-logging">
#
&lt;/a>
Using WAL (Write-Ahead Logging)
&lt;/div>
&lt;/h2>
&lt;p>Write-Ahead Logging (WAL) is a journaling mode enabled via &lt;strong>PRAGMA journal_mode=WAL&lt;/strong> that significantly alters how SQLite handles atomicity and concurrency. In default rollback modes, a write operation requires an exclusive lock that prevents all other readers and writers from accessing the database. WAL improves this by appending changes to a separate -wal file rather than writing directly to the main database file. This architecture allows readers to read from the main database (and the WAL) while a writer appends to the WAL, effectively allowing simultaneous readers and writers.&lt;/p>
&lt;p>The changes stored in the -wal file are eventually transferred to the main database file in an operation called a &amp;ldquo;checkpoint.&amp;rdquo; Unlike foreign key settings, the WAL journaling mode is persistent; once set, the database remains in WAL mode across connections and restarts until explicitly changed. However, WAL introduces operational constraints: it relies on a shared memory file (-shm), which means all connections to the database must be on the same machine (preventing use over most network filesystems), and the -wal file can grow indefinitely if checkpoints are not triggered regularly.&lt;/p></description></item><item><title>Iterating over local IP addresses in Go</title><link>/blog/iterating_over_local_ip_addresses_in_go/</link><pubDate>Wed, 15 Jan 2025 00:00:00 +0100</pubDate><guid>/blog/iterating_over_local_ip_addresses_in_go/</guid><description>&lt;p>While developing an application for local network communication and file transfer, I stumbled upon a simple approach for iterating over valid IP address subsets in Go. The brilliance of this method lies in its simplicity and conciseness. If you&amp;rsquo;d like to jump straight to the code used during the preliminary design phase to establish a local network connection, it’s available &lt;a href="https://github.com/mszalewicz/workbench/blob/main/local_network_receive_send/main.go">here&lt;/a>.&lt;/p>
&lt;p>We aim to iterate over valid local IP addresses to identify potential instances of our application. For each candidate, we will attempt to establish a &amp;ldquo;handshake&amp;rdquo; using our own protocol. Specifically, interactions between application instances will occur over TCP, which guarantees that the order of data chunks sent between peers is managed by the Transmission Control Protocol. This will simplify our approach as we won&amp;rsquo;t need to handle data ordering manually. Building on this foundation, we will design our own messaging scheme.&lt;/p>
&lt;p>To achieve our objectives, we first need to discover candidate devices. We&amp;rsquo;ll use Go’s net package to:&lt;/p>
&lt;ul>
&lt;li>Iterate over the network interfaces of the host machine.&lt;/li>
&lt;li>Identify the IP addresses assigned to each interface.&lt;/li>
&lt;li>Ensure that the local network address is assigned to at least one interface (i.e., confirm the machine is connected to the local network via Ethernet or Wi-Fi).&lt;/li>
&lt;li>Search for potential application instances on the local network.&lt;/li>
&lt;li>Establish a connection to confirm the receiver is a valid instance.&lt;/li>
&lt;/ul>
&lt;p>Currently, most routers use the &lt;strong>192.168.1.0/24&lt;/strong> subnet for local networks. This raises a valid question: Why check all interfaces and manually iterate over usable addresses? Why not simplify the process by scanning the 254 possible addresses (excluding &lt;strong>192.168.1.0&lt;/strong> as the network identifier and &lt;strong>192.168.1.255&lt;/strong> as the broadcast address)? There are two reasons for this approach:&lt;/p>
&lt;ol>
&lt;li>To gain experience and build tools for situations where the address space is unknown ahead of time.&lt;/li>
&lt;li>To make the process adaptable for future support of IPv6 (i.e. fe80::/64).&lt;/li>
&lt;/ol>
&lt;h2 id="building-logic-in-go" >
&lt;div>
&lt;a href="#building-logic-in-go">
#
&lt;/a>
Building logic in Go
&lt;/div>
&lt;/h2>
&lt;p>First, we need to identify the network interfaces available on the machine. We retrieve a list of interfaces that represent the various network adapters present, such as Ethernet or Wi-Fi:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">interfaces&lt;/span>, &lt;span style="color:#000">err&lt;/span> := &lt;span style="color:#000">net&lt;/span>.&lt;span style="color:#000">Interfaces&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">if&lt;/span> &lt;span style="color:#000">err&lt;/span> != &lt;span style="color:#00f">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">log&lt;/span>.&lt;span style="color:#000">Fatal&lt;/span>(&lt;span style="color:#000">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Next, we iterate through the collection of interfaces to examine the IP addresses assigned to each one. This step helps us determine the addresses that are bound to the host machine:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">interfaces&lt;/span>, &lt;span style="color:#000">err&lt;/span> := &lt;span style="color:#000">net&lt;/span>.&lt;span style="color:#000">Interfaces&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">if&lt;/span> &lt;span style="color:#000">err&lt;/span> != &lt;span style="color:#00f">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">log&lt;/span>.&lt;span style="color:#000">Fatal&lt;/span>(&lt;span style="color:#000">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">for&lt;/span> &lt;span style="color:#000">_&lt;/span>, &lt;span style="color:#000">intrface&lt;/span> := &lt;span style="color:#00f">range&lt;/span> &lt;span style="color:#000">interfaces&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">addresses&lt;/span>, &lt;span style="color:#000">err&lt;/span> := &lt;span style="color:#000">intrface&lt;/span>.&lt;span style="color:#000">Addrs&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> &lt;span style="color:#000">err&lt;/span> != &lt;span style="color:#00f">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">log&lt;/span>.&lt;span style="color:#000">Fatal&lt;/span>(&lt;span style="color:#000">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>While processing &lt;code>addresses&lt;/code>, we are:&lt;/p>
&lt;ol>
&lt;li>&lt;strong>parsing the CIDR Format&lt;/strong>: Each address is analyzed in CIDR (Classless Inter-Domain Routing) notation. We will explain what CIDR is in the next non-code paragraph.&lt;/li>
&lt;li>&lt;strong>checking for IPv4&lt;/strong>: For now, we focus solely on IPv4 addresses, as these are the ones relevant to our goal.&lt;/li>
&lt;li>&lt;strong>filtering for &amp;ldquo;192.168&amp;rdquo;&lt;/strong>: We specifically look for addresses in the &lt;code>192.168.x.x&lt;/code> range, which is part of the IPv4 space reserved for small local networks. For more details, refer to &lt;a href="https://datatracker.ietf.org/doc/html/rfc1918">RFC 1918&lt;/a>.&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">interfaces&lt;/span>, &lt;span style="color:#000">err&lt;/span> := &lt;span style="color:#000">net&lt;/span>.&lt;span style="color:#000">Interfaces&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">if&lt;/span> &lt;span style="color:#000">err&lt;/span> != &lt;span style="color:#00f">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">log&lt;/span>.&lt;span style="color:#000">Fatal&lt;/span>(&lt;span style="color:#000">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">for&lt;/span> &lt;span style="color:#000">_&lt;/span>, &lt;span style="color:#000">intrface&lt;/span> := &lt;span style="color:#00f">range&lt;/span> &lt;span style="color:#000">interfaces&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">addresses&lt;/span>, &lt;span style="color:#000">err&lt;/span> := &lt;span style="color:#000">intrface&lt;/span>.&lt;span style="color:#000">Addrs&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> &lt;span style="color:#000">err&lt;/span> != &lt;span style="color:#00f">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">log&lt;/span>.&lt;span style="color:#000">Fatal&lt;/span>(&lt;span style="color:#000">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">for&lt;/span> &lt;span style="color:#000">_&lt;/span>, &lt;span style="color:#000">address&lt;/span> := &lt;span style="color:#00f">range&lt;/span> &lt;span style="color:#000">addresses&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">thisMachineIP&lt;/span>, &lt;span style="color:#000">ipNet&lt;/span>, &lt;span style="color:#000">err&lt;/span> := &lt;span style="color:#000">net&lt;/span>.&lt;span style="color:#000">ParseCIDR&lt;/span>(&lt;span style="color:#000">address&lt;/span>.&lt;span style="color:#000">String&lt;/span>())
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> &lt;span style="color:#000">err&lt;/span> != &lt;span style="color:#00f">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">log&lt;/span>.&lt;span style="color:#000">Fatal&lt;/span>(&lt;span style="color:#000">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> &lt;span style="color:#000">thisMachineIP&lt;/span>.&lt;span style="color:#000">To4&lt;/span>() == &lt;span style="color:#00f">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">continue&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> &lt;span style="color:#000">strings&lt;/span>.&lt;span style="color:#000">HasPrefix&lt;/span>(&lt;span style="color:#000">thisMachineIP&lt;/span>.&lt;span style="color:#000">String&lt;/span>(), &lt;span style="color:#5a2">&amp;#34;192.168&amp;#34;&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="cidr-and-subnet-mask" >
&lt;div>
&lt;a href="#cidr-and-subnet-mask">
#
&lt;/a>
CIDR and subnet mask
&lt;/div>
&lt;/h2>
&lt;p>If you&amp;rsquo;re already famililar with concepts, jumpt to &lt;a href="#code_continued">next section&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing">CIDR&lt;/a> is a simple notation used to represent an IP address along with its associated subnet mask. The format is &lt;code>x.x.x.x/y&lt;/code>, where the &lt;code>x.x.x.x&lt;/code> represents the IP address and &lt;code>y&lt;/code> indicates the subnet mask&amp;rsquo;s length in bits. For instance, &lt;code>192.168.1.0/24&lt;/code> means the IP address is masked using the first 24 bits of the address. We&amp;rsquo;ll explore the practical implications of this shortly.&lt;/p>
&lt;p>It’s important to understand that CIDR is simply a way to &lt;strong>describe&lt;/strong> the combination of an IP address and its subnet mask. The same information can also be expressed in other forms, such as an IP address paired with a hexadecimal representation of the subnet mask.&lt;/p>
&lt;p>When inspecting the interfaces on a host machine using commands like &lt;code>ifconfig&lt;/code> (macOS), &lt;code>ip addr&lt;/code> (Linux), or &lt;code>ipconfig&lt;/code> (Windows), you might encounter output similar to this:&lt;/p>
&lt;pre tabindex="0">&lt;code>...
inet 192.168.1.24 netmask 0xffffff00 broadcast 192.168.1.255
...
&lt;/code>&lt;/pre>&lt;p>This specific example is what I retrieved from my own machine. Here, the &lt;strong>24&lt;/strong> in the &lt;code>192.168.1.24&lt;/code> address indicates that the interface was assigned this unique address by the local router. On another machine, you might see a different value for the last part of the IP address. Last part of the IP address is stored in 1 byte, it can range between &lt;strong>1&lt;/strong> and &lt;strong>254&lt;/strong> (the first and last values in the range are reserved, so the total is not 256). The specific value assigned depends on the router and the network configuration. It&amp;rsquo;s important to note that this IP address is &lt;strong>unique&lt;/strong> to your machine within the local network.&lt;/p>
&lt;p>Important detail in the &lt;code>ifconfig&lt;/code> output above is the subnet mask represented as a hexadecimal number. In the example, the subnet mask is shown as &lt;code>0xffffff00&lt;/code>.&lt;/p>
&lt;p>To explain briefly, hexadecimal numbers use two characters to represent each byte of information. Breaking down &lt;code>0xffffff00&lt;/code> into four parts gives &lt;code>[ff] [ff] [ff] [00]&lt;/code>. Each &lt;code>ff&lt;/code> corresponds to 8 bits (since &lt;code>ff&lt;/code> in hex equals 255 in decimal, which is 8 ones in binary), and &lt;code>00&lt;/code> corresponds to 0 bits. Adding these together gives a total of 24 bits, aligning with the /24 in CIDR notation.&lt;/p>
&lt;pre tabindex="0">&lt;code>192.168.1.24/24 is equivalent to 192.168.1.24 0xffffff00
&lt;/code>&lt;/pre>&lt;p>Great, now we know two ways to write a subnet mask, but what does it actually mean? Network bit masking is a method to divide an IP address into two parts: the network portion and the device (host) portion. A subnet mask, such as &lt;code>ffffff00&lt;/code> in hexadecimal, represents a binary pattern of &lt;code>11111111.11111111.11111111.00000000&lt;/code> in bits. This means the first 24 bits are reserved for identifying the network, while the remaining 8 bits are for individual devices within that network. To visualise:&lt;/p>
&lt;pre tabindex="0">&lt;code> FF FF FF 00
│ │ │ │
┌───┘ │ │ └───┐
│ │ │ │ hexadecimal to binary
│ │ │ │
▼ ▼ ▼ ▼
11111111.11111111.11111111.00000000
│ │ │ │
│ │ │ │ binary to IP notation
│ │ │ │
└───┐ │ │ ┌────┘
▼ ▼ ▼ ▼
255 . 255 . 255 . 0
│ │ │ │
│ │ │ │ map between mask and IP address
│ │ │ │
▽ ▽ ▽ ▽
192 . 168 . 1 . 1
▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬ ▲
└──────┬──────┘ └───────┐
│ │
network portion host portion
&lt;/code>&lt;/pre>&lt;h2 id="code_continued" >
&lt;div>
&lt;a href="#code_continued">
#
&lt;/a>
Code continued
&lt;/div>
&lt;/h2>
&lt;p>Now that we understand masking, we can implement the search for candidate entries to check if they are instances of our application within the local network. Below is the final version of the code, with &lt;code>highlighted&lt;/code> parts showing the changes made from the previous version. In brief, we create a goroutine for each valid address within the range defined by the subnet mask. Each goroutine attempts to establish a TCP connection on port &lt;code>44444&lt;/code>. This port was chosen to avoid conflicts with known reserved ports, but it might be changed in the final version of the application. If a valid connection is established, we print the candidate network address for further verification.&lt;/p>
&lt;p>We’ll discuss the most interesting part below.&lt;/p>
&lt;div class="highlight">&lt;div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
&lt;/span>&lt;span style="background-color:#e5e5e5">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
&lt;/span>&lt;/span>&lt;span style="background-color:#e5e5e5">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
&lt;/span>&lt;/span>&lt;span style="background-color:#e5e5e5">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
&lt;/span>&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
&lt;/span>&lt;span style="background-color:#e5e5e5">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
&lt;/span>&lt;/span>&lt;span style="background-color:#e5e5e5">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
&lt;/span>&lt;/span>&lt;span style="background-color:#e5e5e5">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
&lt;/span>&lt;/span>&lt;span style="background-color:#e5e5e5">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
&lt;/span>&lt;/span>&lt;span style="background-color:#e5e5e5">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
&lt;/span>&lt;/span>&lt;span style="background-color:#e5e5e5">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
&lt;/span>&lt;/span>&lt;span style="background-color:#e5e5e5">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
&lt;/span>&lt;/span>&lt;span style="background-color:#e5e5e5">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
&lt;/span>&lt;/span>&lt;span style="background-color:#e5e5e5">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
&lt;/span>&lt;/span>&lt;span style="background-color:#e5e5e5">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
&lt;/span>&lt;/span>&lt;span style="background-color:#e5e5e5">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
&lt;/span>&lt;/span>&lt;span style="background-color:#e5e5e5">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
&lt;/span>&lt;/span>&lt;span style="background-color:#e5e5e5">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
&lt;/span>&lt;/span>&lt;span style="background-color:#e5e5e5">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
&lt;/span>&lt;/span>&lt;span style="background-color:#e5e5e5">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
&lt;/span>&lt;/span>&lt;span style="background-color:#e5e5e5">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
&lt;/span>&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
&lt;/span>&lt;span style="background-color:#e5e5e5">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
&lt;/span>&lt;/span>&lt;span style="background-color:#e5e5e5">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
&lt;/span>&lt;/span>&lt;span style="background-color:#e5e5e5">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
&lt;/span>&lt;/span>&lt;span style="background-color:#e5e5e5">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
&lt;/span>&lt;/span>&lt;span style="background-color:#e5e5e5">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
&lt;/span>&lt;/span>&lt;span style="background-color:#e5e5e5">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
&lt;/span>&lt;/span>&lt;span style="background-color:#e5e5e5">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
&lt;/span>&lt;/span>&lt;span style="background-color:#e5e5e5">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">func&lt;/span> &lt;span style="color:#000">findAddresses&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">interfaces&lt;/span>, &lt;span style="color:#000">err&lt;/span> := &lt;span style="color:#000">net&lt;/span>.&lt;span style="color:#000">Interfaces&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> &lt;span style="color:#000">err&lt;/span> != &lt;span style="color:#00f">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">log&lt;/span>.&lt;span style="color:#000">Fatal&lt;/span>(&lt;span style="color:#000">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">for&lt;/span> &lt;span style="color:#000">_&lt;/span>, &lt;span style="color:#000">intrface&lt;/span> := &lt;span style="color:#00f">range&lt;/span> &lt;span style="color:#000">interfaces&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">addresses&lt;/span>, &lt;span style="color:#000">err&lt;/span> := &lt;span style="color:#000">intrface&lt;/span>.&lt;span style="color:#000">Addrs&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> &lt;span style="color:#000">err&lt;/span> != &lt;span style="color:#00f">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">log&lt;/span>.&lt;span style="color:#000">Fatal&lt;/span>(&lt;span style="color:#000">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">for&lt;/span> &lt;span style="color:#000">_&lt;/span>, &lt;span style="color:#000">address&lt;/span> := &lt;span style="color:#00f">range&lt;/span> &lt;span style="color:#000">addresses&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">thisMachineIP&lt;/span>, &lt;span style="color:#000">ipNet&lt;/span>, &lt;span style="color:#000">err&lt;/span> := &lt;span style="color:#000">net&lt;/span>.&lt;span style="color:#000">ParseCIDR&lt;/span>(&lt;span style="color:#000">address&lt;/span>.&lt;span style="color:#000">String&lt;/span>())
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> &lt;span style="color:#000">err&lt;/span> != &lt;span style="color:#00f">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">log&lt;/span>.&lt;span style="color:#000">Fatal&lt;/span>(&lt;span style="color:#000">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> &lt;span style="color:#000">thisMachineIP&lt;/span>.&lt;span style="color:#000">To4&lt;/span>() == &lt;span style="color:#00f">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">continue&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#e5e5e5">&lt;span> &lt;span style="color:#00f">var&lt;/span> &lt;span style="color:#000">wg&lt;/span> &lt;span style="color:#000">sync&lt;/span>.&lt;span style="color:#000">WaitGroup&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#e5e5e5">&lt;span> &lt;span style="color:#000">targetPort&lt;/span> := &lt;span style="color:#5a2">&amp;#34;44444&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#e5e5e5">&lt;span> &lt;span style="color:#000">timeout&lt;/span> := &lt;span style="color:#3af">500&lt;/span> * &lt;span style="color:#000">time&lt;/span>.&lt;span style="color:#000">Millisecond&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> &lt;span style="color:#000">strings&lt;/span>.&lt;span style="color:#000">HasPrefix&lt;/span>(&lt;span style="color:#000">thisMachineIP&lt;/span>.&lt;span style="color:#000">String&lt;/span>(), &lt;span style="color:#5a2">&amp;#34;192.168&amp;#34;&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#e5e5e5">&lt;span> &lt;span style="color:#00f">for&lt;/span> &lt;span style="color:#000">ip&lt;/span> := &lt;span style="color:#000">thisMachineIP&lt;/span>.&lt;span style="color:#000">Mask&lt;/span>(&lt;span style="color:#000">ipNet&lt;/span>.&lt;span style="color:#000">Mask&lt;/span>); &lt;span style="color:#000">ipNet&lt;/span>.&lt;span style="color:#000">Contains&lt;/span>(&lt;span style="color:#000">ip&lt;/span>); &lt;span style="color:#000">incrementIP&lt;/span>(&lt;span style="color:#000">ip&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#e5e5e5">&lt;span> &lt;span style="color:#000">wg&lt;/span>.&lt;span style="color:#000">Add&lt;/span>(&lt;span style="color:#3af">1&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#e5e5e5">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#e5e5e5">&lt;span> &lt;span style="color:#00f">go&lt;/span> &lt;span style="color:#00f">func&lt;/span>(&lt;span style="color:#000">ip&lt;/span> &lt;span style="color:#00f">string&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#e5e5e5">&lt;span> &lt;span style="color:#00f">defer&lt;/span> &lt;span style="color:#000">wg&lt;/span>.&lt;span style="color:#000">Done&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#e5e5e5">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#e5e5e5">&lt;span> &lt;span style="color:#000">conn&lt;/span>, &lt;span style="color:#000">err&lt;/span> := &lt;span style="color:#000">net&lt;/span>.&lt;span style="color:#000">DialTimeout&lt;/span>(&lt;span style="color:#5a2">&amp;#34;tcp&amp;#34;&lt;/span>, &lt;span style="color:#000">address&lt;/span>, &lt;span style="color:#000">timeout&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#e5e5e5">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#e5e5e5">&lt;span> &lt;span style="color:#00f">if&lt;/span> &lt;span style="color:#000">err&lt;/span> == &lt;span style="color:#00f">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#e5e5e5">&lt;span> &lt;span style="color:#000">fmt&lt;/span>.&lt;span style="color:#000">Printf&lt;/span>(&lt;span style="color:#5a2">&amp;#34;Server candidate found at %s\n&amp;#34;&lt;/span>, &lt;span style="color:#000">address&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#e5e5e5">&lt;span> &lt;span style="color:#000">conn&lt;/span>.&lt;span style="color:#000">Close&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#e5e5e5">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#e5e5e5">&lt;span> }(&lt;span style="color:#000">ip&lt;/span>.&lt;span style="color:#000">String&lt;/span>())
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#e5e5e5">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#e5e5e5">&lt;span> &lt;span style="color:#000">wg&lt;/span>.&lt;span style="color:#000">Wait&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#e5e5e5">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#e5e5e5">&lt;span>&lt;span style="color:#00f">func&lt;/span> &lt;span style="color:#000">incrementIP&lt;/span>(&lt;span style="color:#000">ip&lt;/span> &lt;span style="color:#000">net&lt;/span>.&lt;span style="color:#000">IP&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#e5e5e5">&lt;span> &lt;span style="color:#00f">for&lt;/span> &lt;span style="color:#000">pos&lt;/span> := &lt;span style="color:#000">len&lt;/span>(&lt;span style="color:#000">ip&lt;/span>) - &lt;span style="color:#3af">1&lt;/span>; &lt;span style="color:#000">pos&lt;/span> &amp;gt;= &lt;span style="color:#3af">0&lt;/span>; &lt;span style="color:#000">pos&lt;/span>-- {
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#e5e5e5">&lt;span> &lt;span style="color:#000">ip&lt;/span>[&lt;span style="color:#000">pos&lt;/span>]++
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#e5e5e5">&lt;span> &lt;span style="color:#00f">if&lt;/span> &lt;span style="color:#000">ip&lt;/span>[&lt;span style="color:#000">pos&lt;/span>] &amp;gt; &lt;span style="color:#3af">0&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#e5e5e5">&lt;span> &lt;span style="color:#00f">break&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#e5e5e5">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#e5e5e5">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#e5e5e5">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>We are focusing on how the iteration over a given address space is performed. The initialization statement for our loop is &lt;code>ip := thisMachineIP.Mask(ipNet.Mask)&lt;/code>. This calculates the &lt;strong>network identifier&lt;/strong> for the given address and subnet mask. For example, in the network &lt;code>192.168.1.1/16&lt;/code>, the result would be &lt;code>192.168.0.0&lt;/code>.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">for&lt;/span> &lt;span style="color:#000">ip&lt;/span> := &lt;span style="color:#000">thisMachineIP&lt;/span>.&lt;span style="color:#000">Mask&lt;/span>(&lt;span style="color:#000">ipNet&lt;/span>.&lt;span style="color:#000">Mask&lt;/span>); &lt;span style="color:#000">ipNet&lt;/span>.&lt;span style="color:#000">Contains&lt;/span>(&lt;span style="color:#000">ip&lt;/span>); &lt;span style="color:#000">incrementIP&lt;/span>(&lt;span style="color:#000">ip&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>The loop condition, &lt;code>ipNet.Contains(ip)&lt;/code>, ensures that the loop continues as long as the current IP address is within the range of valid addresses in the target network.&lt;/p>
&lt;p>The final part is the loop statement, executed after each iteration. The &lt;code>incrementIP(ip)&lt;/code> function increments the bytes of the IP address, starting from the last byte. A key concept here is that when a byte reaches its maximum value of &lt;strong>255&lt;/strong>, incrementing it by &lt;strong>1&lt;/strong> causes it to wrap around to &lt;strong>0&lt;/strong>. For example, if the last byte is &lt;code>255&lt;/code>, it becomes &lt;code>0&lt;/code> upon incrementing.&lt;/p>
&lt;p>This wrapping mechanism, combined with the condition &lt;code>if ip[pos] &amp;gt; 0 {break}&lt;/code>, creates a natural progression through the address space.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">func&lt;/span> &lt;span style="color:#000">incrementIP&lt;/span>(&lt;span style="color:#000">ip&lt;/span> &lt;span style="color:#000">net&lt;/span>.&lt;span style="color:#000">IP&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">for&lt;/span> &lt;span style="color:#000">pos&lt;/span> := &lt;span style="color:#000">len&lt;/span>(&lt;span style="color:#000">ip&lt;/span>) - &lt;span style="color:#3af">1&lt;/span>; &lt;span style="color:#000">pos&lt;/span> &amp;gt;= &lt;span style="color:#3af">0&lt;/span>; &lt;span style="color:#000">pos&lt;/span>-- {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">ip&lt;/span>[&lt;span style="color:#000">pos&lt;/span>]++
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> &lt;span style="color:#000">ip&lt;/span>[&lt;span style="color:#000">pos&lt;/span>] &amp;gt; &lt;span style="color:#3af">0&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">break&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Let&amp;rsquo;s illustrate this with an example. Initial condition results in:&lt;/p>
&lt;pre tabindex="0">&lt;code>192.168.0.0
&lt;/code>&lt;/pre>&lt;p>Then incrementIP(), adds 1 to last byte of address:&lt;/p>
&lt;pre tabindex="0">&lt;code>192.168.0.0
192.168.0.1
192.168.0.2
...
192.168.0.253
192.168.0.254
192.168.0.255
&lt;/code>&lt;/pre>&lt;p>The next call to incrementIP() will reset the last byte to 0. However, since the condition &lt;code>if ip[pos] &amp;gt; 0 {break}&lt;/code> is no longer satisfied (the byte is 0), the loop &lt;code>for pos := len(ip) - 1; pos &amp;gt;= 0; pos-- {}&lt;/code> continues. In this case, last byte will stay as 0 and the increment will modify the second-to-last byte.&lt;/p>
&lt;pre tabindex="0">&lt;code>192.168.0.0
192.168.0.1
192.168.0.2
...
192.168.0.253
192.168.0.254
192.168.0.255
192.168.1.0
&lt;/code>&lt;/pre>&lt;p>The process will continue until it reaches &lt;code>192.168.255.255&lt;/code>, as the next value falls outside the scope of our example network. As you can see, the entire process of iterating through the given address space is achieved in a concise and self-describing manner. This approach efficiently handles address progression without requiring complex logic. The simplicity and clarity of the method make it easy to understand and implement in context involving IP address manipulation.&lt;/p>
&lt;h2 id="footnotes" >
&lt;div>
&lt;a href="#footnotes">
#
&lt;/a>
Footnotes
&lt;/div>
&lt;/h2>
&lt;ul>
&lt;li>In the code, I spawn a new goroutine for each address that needs to be checked. It’s important to note that this approach can put a strain on your system resources. For a typical local network, there are up to 254 addresses to check, meaning the same number of goroutines may be created in the worst-case scenario. This is manageable. However, since each goroutine waits for a TCP response, their lifecycle is extended, which can create bottlenecks. During testing with a larger network like &lt;code>192.168.0.0/16&lt;/code>, the program ran into crashes. In this case, theoretically as many as 65,534 goroutines could be created. A more efficient strategy would involve using a goroutine pool, where goroutines are recycled as tasks are completed. For simplicity and to keep the focus on the program&amp;rsquo;s core logic, I decided not to implement a goroutine pool in this example.&lt;/li>
&lt;/ul></description></item><item><title>SQLite Pitfalls</title><link>/blog/sqlite_pitfalls_1/</link><pubDate>Mon, 11 Nov 2024 10:20:42 +0100</pubDate><guid>/blog/sqlite_pitfalls_1/</guid><description>&lt;p>SQLite is the world’s &lt;a href="https://www.sqlite.org/mostdeployed.html">most widely&lt;/a> used database, powering the backends of countless applications. For most software, it offers a reliable solution for embedded data storage, eliminating the need to reinvent the wheel. Its broad adoption means developers benefit from a well-documented, dependable tool with a familiar SQL dialect.&lt;/p>
&lt;p>Recent interest in SQLite has surged, particularly due to its fit for two key technological trends. First, it’s a strong choice for multi-tenant architectures, where platforms leverage SQLite to give each tenant an isolated database. This setup simplifies data management while maintaining privacy and scalability. Second, SQLite has found new applications in web-based environments with the rise of WebAssembly (WASM). By embedding SQLite databases directly into browsers, developers can provide fast, local data storage that complements server-side databases. This enables efficient offline functionality and performance gains for web apps. For a detailed example of this use case, check out Notion’s excelent blog &lt;a href="https://www.notion.so/blog/how-we-sped-up-notion-in-the-browser-with-wasm-sqlite">post&lt;/a> on how they sped up their browser app.&lt;/p>
&lt;p>More and more people, myself included, are becoming intrigued by SQLite. However, for those transitioning from other database systems, there are a few surprising differences to discover.&lt;/p>
&lt;h2 id="weak-out-of-the-box-guarantees" >
&lt;div>
&lt;a href="#weak-out-of-the-box-guarantees">
#
&lt;/a>
Weak out of the box guarantees
&lt;/div>
&lt;/h2>
&lt;p>Have you ever wanted to insert a text value into a column designated as a boolean, only to have MySQL prevent it? Me neither. But we also can&amp;rsquo;t guarantee that a new intern won’t get overly enthusiastic one day or that an unexpected parsing bug might someday return a text value instead of a boolean and attempt to insert it into the database. While other databases enforce data types, SQLite, by default, doesn’t prevent inserting different types into columns than the defined type might suggest—unless properly configured. So, let&amp;rsquo;s put this to the test. We will create simple table for products:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">CREATE&lt;/span> &lt;span style="color:#00f">TABLE&lt;/span> &lt;span style="color:#000">product&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">id&lt;/span> &lt;span style="color:#000">TEXT&lt;/span> &lt;span style="color:#00f">PRIMARY&lt;/span> &lt;span style="color:#00f">KEY&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">name&lt;/span> &lt;span style="color:#000">TEXT&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">type&lt;/span> &lt;span style="color:#000">TEXT&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">quantity&lt;/span> &lt;span style="color:#000">INTEGER&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>We will attempt to insert both valid and invalid data into the &amp;lsquo;quantity&amp;rsquo; column, to examine the results of each operation:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">INSERT&lt;/span> &lt;span style="color:#00f">INTO&lt;/span> &lt;span style="color:#000">product&lt;/span> &lt;span style="color:#00f">VALUES&lt;/span> (&lt;span style="color:#5a2">&amp;#39;acbdb5a5&amp;#39;&lt;/span>, &lt;span style="color:#5a2">&amp;#39;Raspberry Pi 5&amp;#39;&lt;/span>, &lt;span style="color:#5a2">&amp;#39;Computer&amp;#39;&lt;/span>, &lt;span style="color:#3af">32&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">INSERT&lt;/span> &lt;span style="color:#00f">INTO&lt;/span> &lt;span style="color:#000">product&lt;/span> &lt;span style="color:#00f">VALUES&lt;/span> (&lt;span style="color:#5a2">&amp;#39;0ac595de&amp;#39;&lt;/span>, &lt;span style="color:#5a2">&amp;#39;EW3270U&amp;#39;&lt;/span>, &lt;span style="color:#5a2">&amp;#39;Monitor&amp;#39;&lt;/span>, &lt;span style="color:#5a2">&amp;#39;a lot&amp;#39;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">SELECT&lt;/span> *, &lt;span style="color:#000">typeof&lt;/span>(&lt;span style="color:#000">quantity&lt;/span>) &lt;span style="color:#00f">FROM&lt;/span> &lt;span style="color:#000">product&lt;/span>;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>I&amp;rsquo;ve added a typeof() conversion to inspect how SQLite stores data underneath. Even if an incorrect data type is inserted into an INTEGER column, the database neither raises an error nor issues a warning. Instead, SQLite joyfully stores the value without any indication of a mismatch. Here is the result of test:&lt;/p>
&lt;pre tabindex="0">&lt;code>+----------+----------------+----------+----------+------------------+
| id | name | type | quantity | typeof(quantity) |
+----------+----------------+----------+----------+------------------+
| acbdb5a5 | Raspberry Pi 5 | Computer | 32 | integer |
| 0ac595de | EW3270U | Monitor | a lot | text |
+----------+----------------+----------+----------+------------------+
&lt;/code>&lt;/pre>&lt;p>While insertion of mismatched type described above would lead to error in MySQL:&lt;/p>
&lt;pre tabindex="0">&lt;code>ERROR 1366 (HY000) at line 21: Incorrect integer value: &amp;#39;a lot&amp;#39; for column &amp;#39;quantity&amp;#39; at row 1
&lt;/code>&lt;/pre>&lt;p>Users who are accustomed to other databases and expect standard type enforcement might encounter this SQLite behavior unexpectedly — potentially in a production environment, where it could lead to subtle, hard to diagnose issues. Fortunately, there’s a straightforward solution to enforce stricter type constraints in SQLite, which we’ll discuss after addressing another related pitfall that this solution also mitigates.&lt;/p>
&lt;p>As if mismatched column types weren’t enough, consider this: in SQLite, you can insert NULL values into primary key columns. Surprising, right? By default, SQLite doesn’t enforce NOT NULL constraints on primary key columns unless explicitly set. Now, if the primary key is defined as INTEGER PRIMARY KEY AUTOINCREMENT, inserting a NULL triggers automatic assignment of a unique, incremented integer. But if you’re using a TEXT primary key—such as with UUIDs—SQLite, by default, will accept NULL values even if the column is marked as PRIMARY KEY, which can lead to unexpected issues in data integrity.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">INSERT&lt;/span> &lt;span style="color:#00f">INTO&lt;/span> &lt;span style="color:#000">product&lt;/span> &lt;span style="color:#00f">VALUES&lt;/span> (&lt;span style="color:#00f">NULL&lt;/span>, &lt;span style="color:#5a2">&amp;#39;ABC&amp;#39;&lt;/span>, &lt;span style="color:#5a2">&amp;#39;does not matter&amp;#39;&lt;/span>, &lt;span style="color:#5a2">&amp;#39;-∞&amp;#39;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">INSERT&lt;/span> &lt;span style="color:#00f">INTO&lt;/span> &lt;span style="color:#000">product&lt;/span> &lt;span style="color:#00f">VALUES&lt;/span> (&lt;span style="color:#00f">NULL&lt;/span>, &lt;span style="color:#5a2">&amp;#39;DEF&amp;#39;&lt;/span>, &lt;span style="color:#5a2">&amp;#39;still irrelevant&amp;#39;&lt;/span>, &lt;span style="color:#5a2">&amp;#39;∞+&amp;#39;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">SELECT&lt;/span> * &lt;span style="color:#00f">FROM&lt;/span> &lt;span style="color:#000">product&lt;/span>;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Result:&lt;/p>
&lt;pre tabindex="0">&lt;code>+----------+----------------+------------------+----------+
| id | name | TYPE | quantity |
+----------+----------------+------------------+----------+
| acbdb5a5 | Raspberry Pi 5 | Computer | 32 |
| 0ac595de | EW3270U | Monitor | a lot |
| | ABC | does not matter | -∞ |
| | DEF | still irrelevant | ∞+ |
+----------+----------------+------------------+----------+
&lt;/code>&lt;/pre>&lt;p>Yes, in SQLite, you can indeed insert as many NULL primary keys as you want, without any constraints to prevent this. I haven’t found a definitive explanation for why SQLite, by default, allows both incorrect data types and NULL values in primary key columns. The best rationale I’ve come across suggests that this behavior was chosen to maintain backward compatibility. However, why it was implemented this way initially remains something of a mystery.&lt;/p>
&lt;p>Fortunately, SQLite provides a straightforward solution to enforce stricter type and constraint rules: the &lt;strong>STRICT&lt;/strong> table option. By specifying &lt;strong>STRICT&lt;/strong> in your table creation schema, you can ensure that SQLite enforces proper type checking and disallows NULL values in primary keys:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">CREATE&lt;/span> &lt;span style="color:#00f">TABLE&lt;/span> &lt;span style="color:#000">product&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">id&lt;/span> &lt;span style="color:#000">TEXT&lt;/span> &lt;span style="color:#00f">PRIMARY&lt;/span> &lt;span style="color:#00f">KEY&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">name&lt;/span> &lt;span style="color:#000">TEXT&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">type&lt;/span> &lt;span style="color:#000">TEXT&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">quantity&lt;/span> &lt;span style="color:#000">INTEGER&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>) &lt;span style="color:#00f">STRICT&lt;/span>;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>With this scheme, when we try to insert:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">INSERT&lt;/span> &lt;span style="color:#00f">INTO&lt;/span> &lt;span style="color:#000">product&lt;/span> &lt;span style="color:#00f">VALUES&lt;/span> (&lt;span style="color:#5a2">&amp;#39;0ac595de&amp;#39;&lt;/span>, &lt;span style="color:#5a2">&amp;#39;EW3270U&amp;#39;&lt;/span>, &lt;span style="color:#5a2">&amp;#39;Monitor&amp;#39;&lt;/span>, &lt;span style="color:#5a2">&amp;#39;a lot&amp;#39;&lt;/span>);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>We will get error:&lt;/p>
&lt;pre tabindex="0">&lt;code>Runtime error: cannot store TEXT value in INTEGER column product.quantity (19)
&lt;/code>&lt;/pre>&lt;p>And trying to insert NULL primary key:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">INSERT&lt;/span> &lt;span style="color:#00f">INTO&lt;/span> &lt;span style="color:#000">product&lt;/span> &lt;span style="color:#00f">VALUES&lt;/span> (&lt;span style="color:#00f">NULL&lt;/span>, &lt;span style="color:#5a2">&amp;#39;ABC&amp;#39;&lt;/span>, &lt;span style="color:#5a2">&amp;#39;does not matter&amp;#39;&lt;/span>, &lt;span style="color:#5a2">&amp;#39;∞&amp;#39;&lt;/span>);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>will result in SQLite rejecting it:&lt;/p>
&lt;pre tabindex="0">&lt;code>Runtime error: NOT NULL constraint failed: product.id (19)
&lt;/code>&lt;/pre>&lt;h2 id="conclusion" >
&lt;div>
&lt;a href="#conclusion">
#
&lt;/a>
Conclusion
&lt;/div>
&lt;/h2>
&lt;p>While the solution to these issues is straightforward, cleaning up the mess left by subtle bugs caused by SQLite’s default behavior can be a challenging and time-consuming process. These were just the first set of the most surprising issues I encountered in my experience with SQLite.&lt;/p>
&lt;p>There are additional quirks and idiosyncrasies that developers should be aware of, such as enabling foreign key constraints (which are off by default), handling the SQLITE_BUSY error when dealing with concurrent database access, and managing large-scale deletions to shrink database size effectively. I’ll explore these topics in my next entry on working with SQLite, where I’ll dive into best practices for addressing these unique aspects of the database.&lt;/p>
&lt;p>Despite these hurdles, I’ve grown quite fond of SQLite, appreciating the versatility and quality of this open-source project. Its unique approach to data storage and lightweight design make it an invaluable tool in many applications. I’m genuinely excited to deepen my understanding of SQLite’s nuances and explore its full potential as I continue working with it.&lt;/p></description></item></channel></rss>